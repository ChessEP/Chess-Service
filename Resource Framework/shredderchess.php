<?phprequire('resource_framework.php');$wrapper = new ResourceWrapper('1.0', true);$wrapper->setDatabaseOpenings('http://www.shredderchess.com/online/playshredder/fetch.php?action=book&fen=$url_fen$&la=en&bookcode=p40', 'parserTextToJSON');$wrapper->rest();// Parse the text result from the distant website to get a JSON document.function parserTextToJSON($text, $fen) {	$lines = explode("\n", $text);	$moves = array();	foreach($lines as $line) {		$infos = explode('#', $line);		if(count($infos)==14) {			$move = explode('...', $infos[0])[1];			$percentage = $infos[7]/1000;			$wins = round($infos[11]/$infos[6], 3);			$draws = round($infos[12]/$infos[6], 3);			$looses = round($infos[13]/$infos[6], 3);			$nb_play = (int)$infos[6];			$moves[] = array('move'=>$move, /*'value'=>$infos[4], 'percentage'=>$percentage, 'elo'=>$infos[8], 'performance'=>$infos[9],*/ 'probatowin'=>$wins, 'probatonull'=>$draws, /*'looses'=>$looses,*/ 'nb'=>$nb_play);		}	}	return json_encode($moves);}	?>